import { FormEvent, ReactElement, useRef, useState } from "react";
import styles from "./footer.module.scss";
import Logo from "../../assets/logo.png";
import { useNavigate } from "../../data-access/navigate/use-navigate";
import { Link } from "react-router-dom";
import RoomIcon from "@mui/icons-material/Room";
import PhoneIcon from "@mui/icons-material/Phone";
import SendIcon from "@mui/icons-material/Send";
import emailjs from "@emailjs/browser";
import { Alert, Snackbar } from "@mui/material";

export default function Footer(): ReactElement {
  const navList = useNavigate();
  const formRef = useRef<HTMLFormElement | null>(null);
  const [isSuccess, setSuccess] = useState(false);
  const [isError, setError] = useState(false);
  const [errorText, setErrorText] = useState("");

  const sendEmail = (e: FormEvent) => {
    e.preventDefault();
    // kelagahi@lyricslrc.com
    emailjs
      .sendForm("service_zyqeuyo", "template_qjthcim", formRef.current || "", {
        publicKey: "MxxC1nPAfoXxJWd5q",
      })
      .then(
        () => {
          console.log("SUCCESS!");
          setSuccess(true);
          formRef.current?.reset();
          setTimeout(() => {
            setSuccess(false);
          }, 6000);
        },
        (error) => {
          console.log("FAILED...", error.text);
          setErrorText(error.text);
          setError(true);
          setTimeout(() => {
            setError(false);
          }, 6000);
        }
      );
  };

  return (
    <footer className={styles.footer}>
      <div className={styles.footer__wrapper}>
        <div className="container">
          <div className={styles.footer__inner}>
            <div className={styles.footer__column}>
              <div className={styles.footer__logo}>
                <img src={Logo} alt="logo" />
              </div>
              <div className={styles.footer__description}>
                Наша студия звукозаписи — это идеальное место для создания
                профессиональных музыкальных композиций и записи качественных
                треков.
              </div>
              <ul className={styles.footer__social}>
                <li className={styles.footer__social__item}>
                  <a
                    href="https://whatsapp.com/"
                    target="_blank"
                    className={styles.footer__social__link}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="800px"
                      height="800px"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M6.56977 3.98319C11.4745 1.40034 15.4136 2.64745 17.6113 4.27559C20.754 6.60379 23.2641 11.6985 19.9081 16.7047C18.1279 19.3603 15.6602 20.5048 13.2707 20.814C10.991 21.109 8.77689 20.6467 7.2571 20.0253L3.16667 21.4714C2.99483 21.5322 2.80354 21.4946 2.66744 21.3734C2.53134 21.2521 2.47199 21.0665 2.51255 20.8888L3.58961 16.1698C1.56385 10.8285 3.17615 7.32199 4.40887 6.15981C4.6098 5.97039 4.92624 5.97971 5.11567 6.18063C5.3051 6.38156 5.29578 6.69801 5.09485 6.88744C4.20226 7.72894 2.58518 10.8331 4.57691 15.9513C4.61318 16.0444 4.62067 16.1464 4.59842 16.2439L3.68955 20.2259L7.10609 19.018C7.22512 18.9759 7.35567 18.9805 7.47152 19.0306C8.85524 19.6302 10.9756 20.1027 13.1423 19.8223C15.2926 19.5441 17.4822 18.5276 19.0775 16.1479C22.0436 11.7232 19.8771 7.1987 17.016 5.07911C15.1234 3.67694 11.6734 2.51883 7.24396 4.76048C7.05664 5.73721 6.9557 7.21715 7.2392 8.78219C7.5447 10.4687 8.29049 12.2254 9.82483 13.5752C13.2397 16.5795 15.841 15.5907 16.782 14.6836L14.7699 13.516L13.6303 14.5334C13.4946 14.6545 13.3039 14.6924 13.1322 14.6324C12.5728 14.4367 11.7149 14.0381 10.9189 13.4647C10.1318 12.8976 9.34082 12.1135 9.01917 11.1263C8.96882 10.9718 8.99671 10.8025 9.09394 10.6723L9.86191 9.64384L8.96512 7.53645C8.69477 7.65884 8.38071 7.83968 8.17064 8.06249C7.9812 8.26341 7.66476 8.27272 7.46384 8.08328C7.26292 7.89385 7.25361 7.5774 7.44304 7.37648C7.96121 6.82691 8.76823 6.51382 9.10313 6.41985C9.3451 6.35195 9.59987 6.47422 9.69828 6.70547L10.8946 9.51683C10.9644 9.68063 10.9417 9.86914 10.8352 10.0118L10.0604 11.0494C10.3309 11.649 10.8672 12.195 11.5034 12.6533C12.0903 13.0761 12.7192 13.3933 13.1908 13.5853L14.3743 12.5286C14.5356 12.3846 14.7712 12.3606 14.9583 12.4692L17.7783 14.1056C18.0123 14.2415 18.0959 14.5389 17.9667 14.7767C17.0942 16.3833 13.4476 18.0943 9.16431 14.326C7.41719 12.789 6.58919 10.8042 6.25521 8.96043C5.92205 7.12123 6.07434 5.39387 6.31475 4.31668C6.34671 4.17348 6.43995 4.05155 6.56977 3.98319Z"
                        fill="#000000"
                      />
                    </svg>
                  </a>
                </li>
                <li className={styles.footer__social__item}>
                  <a
                    href="https://vk.com/"
                    target="_blank"
                    className={styles.footer__social__link}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="800px"
                      height="800px"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M2.61769 6.67777C2.71269 6.56505 2.85259 6.5 3 6.5H6.52011C6.76502 6.5 6.97388 6.6774 7.01352 6.91907C7.1583 7.80183 7.63441 9.50624 8.75353 11.1068C8.91176 11.3332 8.85657 11.6449 8.63026 11.8031C8.40395 11.9614 8.09222 11.9062 7.93398 11.6799C6.86528 10.1514 6.3333 8.54415 6.10697 7.5H3.6172C4.04612 9.23799 5.22252 12.19 6.9968 14.4198C7.96937 15.6421 9.02569 16.4263 9.93935 16.8978C10.8678 17.377 11.6144 17.5165 11.9624 17.4985C11.9751 17.4979 11.9878 17.4977 12.0006 17.498C12.1625 17.502 12.3593 17.4576 12.5055 17.3385C12.6326 17.235 12.7869 17.0228 12.7869 16.546V15.0252C12.7869 14.7323 12.9017 14.4364 13.1468 14.2466C13.4056 14.0461 13.7439 14.0174 14.0465 14.1576C14.3678 14.3065 14.7351 14.4968 14.9594 14.6176C14.9721 14.6245 14.9845 14.6318 14.9965 14.6397C16.1336 15.3856 17.2291 16.5836 17.9236 17.4732C17.933 17.4852 17.9421 17.4915 17.9481 17.4946C17.954 17.4975 17.9575 17.4978 17.9592 17.4978H20.4749C20.4814 17.4978 20.4844 17.4969 20.485 17.4968C20.4857 17.4965 20.486 17.4964 20.4865 17.4961C20.4877 17.4952 20.4921 17.4916 20.4958 17.4834C20.4995 17.4752 20.5006 17.4667 20.4997 17.4596C20.4991 17.4545 20.4971 17.4444 20.4846 17.4293C19.8601 16.6726 19.0297 15.744 18.3062 14.9348C18.0494 14.6476 17.8061 14.3755 17.5902 14.1315C17.0909 13.5671 17.0547 12.7389 17.4392 12.1192C18.2818 10.761 19.3907 8.81166 19.7328 7.5H17.6905C17.6892 7.5 17.6828 7.50001 17.6709 7.50839C17.6581 7.51739 17.6413 7.53502 17.6288 7.56334C16.9163 9.17115 15.4145 11.1556 14.3216 12.1526C14.0159 12.4314 13.6049 12.4759 13.272 12.2833C12.9607 12.1032 12.7869 11.7589 12.7869 11.3934V7.5H10.1158C10.1517 7.56664 10.1869 7.63499 10.2207 7.70462C10.4234 8.12143 10.6086 8.64048 10.6086 9.14149C10.6086 9.35565 10.6103 9.67975 10.6124 10.0582C10.6177 11.0464 10.625 12.4053 10.6084 13.1453C10.6023 13.4214 10.3734 13.6402 10.0974 13.634C9.82129 13.6278 9.6025 13.399 9.60869 13.1229C9.62495 12.3979 9.61778 11.0723 9.61246 10.0869C9.61037 9.70057 9.60857 9.36652 9.60857 9.14149C9.60857 8.86213 9.49751 8.50402 9.32144 8.14197C9.14872 7.78681 8.94055 7.48285 8.80547 7.32455C8.67885 7.17617 8.65009 6.9677 8.7318 6.79057C8.8135 6.61344 8.99076 6.5 9.18582 6.5H13.2869C13.5631 6.5 13.7869 6.72386 13.7869 7V11.2831C14.7736 10.3329 16.092 8.56303 16.7145 7.1582C16.8777 6.78994 17.2401 6.5 17.6905 6.5H19.7391C20.3596 6.5 20.8758 7.07253 20.7044 7.73709C20.3221 9.21965 19.1227 11.3024 18.2889 12.6463C18.1216 12.916 18.1518 13.2571 18.3392 13.4689C18.5474 13.7042 18.7851 13.9701 19.0381 14.253C19.7649 15.0658 20.6175 16.0193 21.2559 16.7928C21.8037 17.4566 21.3727 18.4978 20.4749 18.4978H17.9592C17.6271 18.4978 17.3292 18.3367 17.1354 18.0886C16.4725 17.2394 15.464 16.1475 14.4659 15.4877C14.2896 15.393 14.0323 15.2596 13.7869 15.1411V16.546C13.7869 17.2685 13.5368 17.7883 13.137 18.1139C12.7638 18.4178 12.3215 18.5025 11.9952 18.4981C11.4082 18.5229 10.4903 18.3075 9.48073 17.7864C8.44555 17.2522 7.2776 16.3788 6.21429 15.0425C4.10659 12.3936 2.8049 8.81716 2.50722 7.08467C2.48226 6.93938 2.52268 6.79049 2.61769 6.67777ZM13.7894 15.0013C13.7895 15.0014 13.7893 15.002 13.7888 15.0032ZM13.6261 15.0649C13.6261 15.0649 13.626 15.0649 13.626 15.0649ZM13.7943 11.4357C13.7942 11.4357 13.7938 11.4351 13.7931 11.4338C13.794 11.435 13.7944 11.4356 13.7943 11.4357Z"
                        fill="#000000"
                      />
                    </svg>
                  </a>
                </li>
                <li className={styles.footer__social__item}>
                  <a
                    href="https://telegram.org/"
                    target="_blank"
                    className={styles.footer__social__link}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="800px"
                      height="800px"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M21.3489 4.64183C21.4734 4.76317 21.526 4.94053 21.4877 5.11016C20.9359 7.55335 19.7598 13.9696 19.4822 20.0229C19.474 20.2015 19.3712 20.362 19.2124 20.4441C19.0537 20.5262 18.8632 20.5173 18.7127 20.4208C16.3647 18.9142 11.6602 16.0278 11.0091 15.6323C10.8858 15.5573 10.8008 15.4327 10.7761 15.2905C10.7514 15.1482 10.7894 15.0023 10.8803 14.8901C10.9514 14.8024 11.0276 14.706 11.1105 14.6011C11.5439 14.0526 12.1621 13.2704 13.2013 12.2766C13.4009 12.0858 13.7174 12.0929 13.9083 12.2925C14.0991 12.4921 14.092 12.8086 13.8924 12.9994C12.9904 13.862 12.432 14.5445 12.0123 15.0733C13.2789 15.8492 16.4196 17.7821 18.5284 19.1177C18.8395 13.8342 19.7665 8.44365 20.3378 5.69741C16.0184 6.93311 8.54822 10.0196 4.32406 11.8562L7.98141 13.2367C9.62636 12.1619 13.2647 9.91045 16.2836 8.46108C16.5325 8.34157 16.8312 8.44648 16.9507 8.69542C17.0703 8.94436 16.9653 9.24305 16.7164 9.36257C13.6191 10.8496 9.82741 13.2144 8.3188 14.2115C8.18492 14.3 8.01669 14.3189 7.86654 14.2622L2.82343 12.3587C2.63357 12.287 2.50586 12.1077 2.5002 11.9048C2.49453 11.702 2.61203 11.5158 2.7976 11.4337C6.88855 9.62258 16.2667 5.68497 20.8771 4.51536C21.0456 4.4726 21.2243 4.52049 21.3489 4.64183Z"
                        fill="#000000"
                      />
                    </svg>
                  </a>
                </li>
                <li className={styles.footer__social__item}>
                  <a
                    href="https://open.spotify.com/"
                    target="_blank"
                    className={styles.footer__social__link}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="800px"
                      height="800px"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M18.6945 5.03629C20.5705 6.88631 21.5001 9.42299 21.5 11.5144C21.4998 16.8041 18.3104 21.5 13.5519 21.5C10.8736 21.5 9.15366 20.5087 8.07566 19.229C7.01497 17.9699 6.6132 16.4773 6.46364 15.5109C6.4276 15.2781 6.55903 15.0517 6.77911 14.9675C9.2346 14.0281 11.5488 14.1707 13.286 14.6464C11.0186 12.495 8.30722 12.4232 6.72628 12.5923C6.47757 12.6189 6.24746 12.4576 6.18763 12.2147C6.1278 11.9719 6.25665 11.7221 6.48926 11.6302C8.90198 10.6762 10.9806 10.5197 12.6624 10.7695C10.3395 9.59715 8.04984 9.3783 6.6465 9.30351C6.41487 9.29117 6.22215 9.12114 6.18103 8.89285C6.13991 8.66457 6.2612 8.43798 6.47397 8.34559C8.88424 7.29902 11.3027 7.14952 13.3353 7.41617C15.358 7.68151 17.0347 8.36395 17.9683 9.02537C18.1937 9.185 18.2469 9.49707 18.0873 9.7224C17.9277 9.94773 17.6156 10.001 17.3903 9.84136C16.616 9.29288 15.1023 8.65654 13.2053 8.40767C11.9434 8.24214 10.5279 8.25028 9.06621 8.56141C11.3253 8.95564 14.2495 9.94562 16.7157 12.5759C16.8995 12.7719 16.8955 13.0782 16.7066 13.2693C16.5177 13.4605 16.2115 13.4681 16.0133 13.2866C15.0545 12.4085 12.9466 11.3457 9.8736 11.7534C11.6916 12.1475 13.7283 13.1691 15.3412 15.5404C15.4707 15.7308 15.4534 15.9849 15.2994 16.1561C15.1454 16.3272 14.8945 16.3711 14.6916 16.2623C13.2829 15.5075 10.5471 14.7518 7.52562 15.762C7.7019 16.6001 8.07419 17.6751 8.84046 18.5847C9.71937 19.6281 11.1542 20.5 13.5519 20.5C17.5225 20.5 20.4998 16.5214 20.5 11.5144C20.5001 9.68571 19.6744 7.407 17.9924 5.74832C16.3299 4.10895 13.814 3.05778 10.3677 3.68229C8.05158 4.102 6.45367 5.10184 5.38669 6.36841C4.31472 7.64092 3.75258 9.21422 3.56877 10.8138C3.38479 12.4149 3.5829 14.0203 4.00877 15.3283C4.4423 16.6597 5.07972 17.5897 5.69583 17.9572C5.933 18.0986 6.0106 18.4055 5.86916 18.6427C5.72772 18.8799 5.4208 18.9575 5.18363 18.816C4.25788 18.264 3.51899 17.054 3.0579 15.6379C2.58916 14.1982 2.37436 12.4484 2.57531 10.6997C2.77643 8.94937 3.39708 7.17807 4.6219 5.72414C5.8517 4.26428 7.66459 3.15584 10.1894 2.69831C13.954 2.01613 16.7989 3.16697 18.6945 5.03629Z"
                        fill="#000000"
                      />
                    </svg>
                  </a>
                </li>
              </ul>
            </div>
            <div className={styles.footer__column}>
              <div className={styles.footer__title}>Карта сайта</div>
              <ul className={styles.footer__nav}>
                {navList.length > 0 &&
                  navList.map((item) => (
                    <li className={styles.footer__nav__item}>
                      <Link className={styles.footer__nav__link} to={item.url}>
                        {item.title}
                      </Link>
                    </li>
                  ))}
              </ul>
            </div>
            <div className={styles.footer__column}>
              <div className={styles.footer__title}>Контакты</div>
              <div className={styles.footer__contacts__item}>
                <div className={styles.footer__contacts__icon}>
                  <RoomIcon />
                </div>
                <div className={styles.footer__contacts__title}>Адрес:</div>
                <div className={styles.footer__contacts__text}>
                  г. Краснодар, улица Герцена, 217
                </div>
              </div>
              <div className={styles.footer__contacts__item}>
                <div className={styles.footer__contacts__icon}>
                  <PhoneIcon />
                </div>
                <div className={styles.footer__contacts__title}>Телефоны:</div>
                <div className={styles.footer__contacts__text}>
                  <a href="tel:+79180392311">+7(918)039-23-11</a> <br />
                  <a href="tel:+79180285560">+7(918)028-55-60</a>
                </div>
              </div>
            </div>
            <div className={styles.footer__column}>
              <div className={styles.footer__title}>Подписаться!</div>
              <form
                ref={formRef}
                onSubmit={sendEmail}
                className={styles.footer__form}
              >
                <input
                  type="email"
                  name="subscribe_mail"
                  placeholder="Ваша почта..."
                  required
                />
                <button className={styles.footer__form__btn} type="submit">
                  <SendIcon />
                </button>
                <Snackbar open={isSuccess} autoHideDuration={6000}>
                  <Alert
                    severity="success"
                    variant="filled"
                    sx={{ width: "100%" }}
                  >
                    Успешно!
                  </Alert>
                </Snackbar>
                <Snackbar open={isError} autoHideDuration={6000}>
                  <Alert
                    severity="error"
                    variant="filled"
                    sx={{ width: "100%" }}
                  >
                    Ошибка... {errorText}
                  </Alert>
                </Snackbar>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div className={styles.footer__copyright}>
        <div className="container">© Все права защищены, 2024</div>
      </div>
    </footer>
  );
}
